<!DOCTYPE html>
<html ng-app="DroneGallery">
    <head>
        <%- include ../partials/head.ejs %>
        <title>Home</title>
    </head>
    <body ng-controller="MainController">
        <%- include ../partials/nav.ejs %>

        <div class="container">
            <h1>Drone Photos</h1>

            <div class="row">
                <% photos.forEach(( photo ) => { %>
                    <div class="col s4">
                        <h5><%= photo.title %></h5>
                        <br />
                        <p><%= photo.description %></p>
                        <img src="<%=photo.image %>" alt="<%= photo.title %>" width="100%" height="100%" class="materialboxed" data-caption="<%= photo.location %>">
                        <%= photo.likes %><i class="material-icons icon-green" ng-click="thumb_up('<%= photo._id %>')">thumb_up</i>
                        <%= photo.dislikes %><i class="material-icons icon-red" ng-click="thumb_down('<%= photo._id %>')">thumb_down</i>
                    </div>
                <% }) %>
                <div class="col s16">
                    <br />
                    <script type="text/javascript">

                        window.location.search = (window.location.search == "") ? '?page=1'

                        function last(){
                            window.location.search = ((window.location.search.match(/\d+/)[0]) - 1 !== 0) ? '?page=' + (window.location.search.match(/\d+/)[0] - 1).toString()
                        }
                        function next(){
                            window.location.search = '?page=' + (Number(window.location.search.match(/\d+/)[0]) + 1).toString()
                        }
                    </script>
                    <a class="indigo darken-2 waves-effect waves-light btn" onclick="last()">Last Page</a>
                    <a class="indigo darken-2 waves-effect waves-light btn" onclick="next()">Next Page</a>
                </div>
            </div>
        </div>


        <%- include ../partials/footer.ejs %>

        <%- include ../partials/scripts.ejs %>
    </body>
</html>
